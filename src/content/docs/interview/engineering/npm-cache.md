---
title: npm cache
---

#### 什么是 npm cache？如何有效管理它？

npm cache 是指 npm（Node Package Manager）在安装或更新 JavaScript 包时，用于缓存这些包以加快 future 安装速度的一个缓存系统。当你使用 npm 安装包时，npm 会将这些包存储在一个特定的目录中，这个目录就是「npm cache」。

1. 查看 npm cache。你可以使用 `npm cache verify` 来检查和验证缓存的健康状况。
2. 清理 npm cache。使用命令 `npm cache clean --force` 可以清除所有缓存的内容。
3. 设置缓存目录。通过 `npm config set cache <路径>` 你可以自定义缓存的路径。

#### 扩展

其实，在更长期的项目开发过程中，我们会发现 npm cache 还是蛮重要的，可以显著提升我们安装包的速度。下面我再详细说一下这几点。

1. 查看 npm cache 的健康状态
- `npm cache verify` 命令可以检查缓存中的文件是否完整、是否有损坏，以及是否有不需要的文件，这是保持缓存健康的一个好方法。

2. 清理 npm cache
- 有时候，你可能会遇到缓存中的包已过期、损坏或出现其他问题，这时候我们可以使用 `npm cache clean --force` 彻底清理缓存。
- 注意：执行这个命令后，所有缓存的包都会被删除，下次安装包的时候需要重新下载。

3. 自定义缓存目录
- npm 默认将缓存存放在系统用户目录下的一个隐藏文件夹中，但在一些特定场景下，比如为了节省主硬盘空间或者规定统一的开发环境，你可能需要修改缓存目录。
- 使用 `npm config set cache <路径>` 可以将缓存目录设置为你指定的路径，这样在安装包时 npm 就会将包缓存到这个新路径下。

除了上面这些直接的管理方法，其实在大型项目里，我们还经常会使用一些 npm 的好帮手，比如：
- `npx`：可以直接临时使用 npm 包而不安装到全局或者项目内。
- `npm ci`：相比 `npm install`，它使用 `package-lock.json` 文件来更快地安装依赖，并更适合在 CI/CD 环境中使用。
